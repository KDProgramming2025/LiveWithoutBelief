#!/usr/bin/env bash
# Local pre-commit hook to prevent committing non-comment content in server_commands.sh
# Setup once per repo:
#   git config core.hooksPath scripts/githooks

set -euo pipefail

ROOT_DIR=$(git rev-parse --show-toplevel)
TARGET="$ROOT_DIR/server_commands.sh"

if [ -f "$TARGET" ]; then
  if grep -nEv '^(#|\s*)$' "$TARGET" >/dev/null 2>&1; then
    echo "[pre-commit] server_commands.sh contains non-comment content. Empty it before committing." >&2
    exit 1
  fi
fi

exit 0